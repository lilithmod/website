import { GetStaticProps } from 'next'
import Link from 'next/link'
import { useEffect, useState } from 'react'
import Button from '../components/inputs/Button'
import Switch from '../components/inputs/Switch'
import config from '../config'
import containers from '../styles/Containers.module.css'
import styles from '../styles/Download.module.css'

export interface DownloadProps {
    downloadGuide: string,
    paragraph: string,
    downloadLink: string,
}

export const getStaticProps: GetStaticProps<DownloadProps> = async () => {
    return {
        props: {
            ...config.pages.download
        }
    }
}

export default function Download(props: DownloadProps) {
    const [clicked, handleClick] = useState(0)
    const [pretty, setPretty] = useState('Windows')

    useEffect(() => {
        handleClick(navigator.platform.includes('Win') ? 0 : navigator.platform.includes('Mac') ? 1 : 2)
    }, [])

    useEffect(() => {
        setPretty(clicked === 0 ? 'Windows' : clicked === 1 ? 'MacOS' : 'Linux')
    }, [clicked])

    return (
        <section className={styles.container}>
            <div className={containers.content}>
                <h1>Download</h1>
                <Switch
                    name="platform"
                    items={['Windows', 'MacOS', 'Linux']}
                    handleClick={handleClick}
                    clicked={clicked}
                />
                <h3 dangerouslySetInnerHTML={{__html: props.paragraph.replace('%{}', pretty)}}></h3>
                <span>Looking for the download guide? Click <Link
                    href={props.downloadGuide.replace('%{}', pretty.toLowerCase())}>here</Link></span>
            </div>

            <div className={containers.content}>
                <div className={styles.card}>
                    <OSLogo platform={clicked}/>
                    <Button link={props.downloadLink.replace('%{}', pretty.toLowerCase())}>Download</Button>
                </div>
            </div>
        </section>
    )
}

const OSLogo = (props: { platform: number }) => {
    switch (props.platform) {
        default:
        case 0:
            return (
                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_226_307)">
                        <path
                            d="M42.7444 90H0V47.2556H42.7444V90ZM90 90H47.2556V47.2556H90V90ZM42.7444 42.7444H0V0H42.7444V42.7444ZM90 42.7444H47.2556V0H90V42.7444Z"
                            fill="white"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_226_307">
                            <rect width="90" height="90" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            )
        case 1:
            return (
                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_226_305)">
                        <path
                            d="M26.5444 88.3153C24.77 87.1348 23.1973 85.6761 21.8869 83.9953C20.4455 82.2605 19.1099 80.4403 17.8875 78.5447C15.019 74.3423 12.7694 69.7494 11.2078 64.9069C9.3319 59.2819 8.42346 53.8903 8.42346 48.6169C8.42346 42.7275 9.69753 37.5863 12.1894 33.2663C14.0366 29.8897 16.7524 27.068 20.056 25.0931C23.2575 23.1046 26.936 22.0164 30.7041 21.9431C32.0231 21.9431 33.4435 22.1344 34.951 22.5C36.0338 22.8066 37.3528 23.2903 38.9644 23.8922C41.0147 24.6825 42.1425 25.1663 42.525 25.2844C43.726 25.7231 44.7356 25.9144 45.5288 25.9144C46.1306 25.9144 46.98 25.7231 47.9447 25.4306C48.4875 25.2394 49.5113 24.9019 50.9766 24.2747C52.4278 23.7459 53.5697 23.2931 54.4781 22.9556C55.8703 22.545 57.2175 22.1653 58.4185 21.9741C59.8422 21.7496 61.287 21.6902 62.7244 21.7969C65.2152 21.9597 67.6686 22.4875 70.006 23.3634C73.8281 24.9019 76.9191 27.3038 79.2197 30.7181C78.2473 31.3175 77.3347 32.0088 76.4944 32.7825C74.6652 34.4041 73.1071 36.3079 71.8791 38.4216C70.274 41.3102 69.4418 44.5642 69.4631 47.8688C69.5222 51.9272 70.5628 55.5019 72.6132 58.5928C74.1205 60.8836 76.0795 62.8426 78.3703 64.35C79.5431 65.1403 80.5528 65.6831 81.5203 66.0488C81.0675 67.455 80.5838 68.8163 80.0128 70.1663C78.718 73.1936 77.1486 76.096 75.3244 78.8372C73.6988 81.1969 72.4247 82.9547 71.4572 84.1247C69.9497 85.9106 68.4985 87.2747 67.0331 88.2253C65.4216 89.2941 63.5175 89.865 61.5825 89.865C60.2721 89.9153 58.9619 89.7568 57.7013 89.3953C56.6185 89.0297 55.5469 88.6331 54.4922 88.1803C53.3957 87.6767 52.2651 87.2509 51.1088 86.9062C48.2504 86.1721 45.2535 86.1673 42.3928 86.8922C41.22 87.2297 40.0922 87.6234 38.9785 88.1072C37.4119 88.7653 36.3713 89.2069 35.7694 89.3953C34.5685 89.7469 33.3225 89.9663 32.0625 90.0394C30.1135 90.0394 28.2966 89.4825 26.4966 88.3547L26.5444 88.3153ZM52.2506 19.0856C49.7025 20.3597 47.2697 20.9025 44.8538 20.7253C44.4741 18.2925 44.8538 15.8034 45.8635 13.0781C46.7231 10.7693 47.9932 8.6349 49.6125 6.77813C51.3225 4.8235 53.3976 3.22137 55.7213 2.06157C58.1963 0.787505 60.556 0.0984424 62.8116 -0.00280762C63.1041 2.54532 62.8116 5.05125 61.875 7.75969C61.0083 10.1539 59.7405 12.3832 58.126 14.3522C56.478 16.3095 54.4556 17.9178 52.1775 19.0828L52.2506 19.0856Z"
                            fill="white"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_226_305">
                            <rect width="90" height="90" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            )
        case 2:
            return (
                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_228_277)">
                        <path
                            d="M46.89 0C46.305 0 45.706 0.0309375 45.0872 0.0759375C29.2388 1.33312 33.4435 18.1069 33.2072 23.7009C32.9147 27.7875 32.0822 31.0247 29.2697 35.0269C25.9425 38.9672 21.285 45.3403 19.0744 51.9722C18.0366 55.0913 17.536 58.3031 18.0057 61.3209C17.8288 61.452 17.6836 61.6212 17.581 61.8159C16.6135 62.8284 15.8935 64.0744 15.1032 64.9659C14.3578 65.7113 13.2891 65.9644 12.1135 66.4622C10.9435 66.9713 9.63847 67.4719 8.87628 69.0244C8.53878 69.7303 8.36159 70.4897 8.37847 71.2828C8.37847 72.0141 8.48253 72.7763 8.58378 73.2881C8.80597 74.7816 9.02253 76.0134 8.73003 76.9219C7.79347 79.4672 7.69222 81.2109 8.33628 82.4878C8.99159 83.7478 10.3416 84.2456 11.8491 84.7462C14.8978 85.4916 19.0125 85.2553 22.2666 86.985C25.7344 88.7428 29.2669 89.505 32.0794 88.7597C33.0495 88.5421 33.959 88.1112 34.7418 87.4983C35.5245 86.8853 36.1609 86.1056 36.6047 85.2159C38.8013 85.2019 41.2172 84.2034 45.0731 83.9559C47.6944 83.7337 50.9766 84.9656 54.7397 84.7012C54.841 85.2159 54.9731 85.4466 55.1785 85.9613V85.9753C56.641 88.8891 59.3522 90.2081 62.2547 89.9888C65.1375 89.7553 68.2144 87.9834 70.7035 85.0838C73.0772 82.2262 77.0175 81.0225 79.6247 79.4588C80.9297 78.7078 81.9844 77.7009 82.0575 76.2497C82.1447 74.7562 81.3122 73.2038 79.3913 71.0944V70.7259L79.3772 70.7119C78.7331 69.9666 78.4407 68.7066 78.1031 67.2441C77.7797 65.7337 77.4281 64.2994 76.2581 63.3178C76.0219 63.1125 75.7885 63.0675 75.541 62.82C75.3332 62.6736 75.0887 62.5879 74.835 62.5725C76.4466 57.78 75.8166 53.0213 74.1741 48.7266C72.1828 43.4391 68.6813 38.8266 66.0291 35.6625C63.0394 31.8966 60.1116 28.3247 60.1706 23.0372C60.2719 14.9625 61.0622 0.039375 46.8844 0.0084375L46.89 0ZM48.8672 12.7716H48.9263C49.7166 12.7716 50.4028 13.0078 51.1088 13.5056C51.826 14.0147 52.3547 14.7516 52.7485 15.5109C53.145 16.4784 53.3531 17.2238 53.3785 18.2194C53.3785 18.1491 53.3925 18.0731 53.3925 18.0028V18.3966C53.3925 18.3656 53.3785 18.3403 53.3785 18.3094L53.3644 18.2194C53.3644 19.1306 53.176 20.0391 52.8103 20.8716C52.6366 21.3455 52.3611 21.7756 52.0031 22.1316C51.9019 22.0753 51.7978 22.0162 51.6797 21.9712C51.286 21.7941 50.9344 21.7378 50.611 21.4762C50.3448 21.3696 50.0701 21.2859 49.7897 21.2259C49.9669 21.0094 50.3325 20.7281 50.4788 20.4806C50.67 20.0109 50.7713 19.4991 50.8022 18.9731V18.8972C50.8102 18.3895 50.7303 17.8842 50.566 17.4038C50.4056 16.9059 50.2031 16.6528 49.8938 16.1578C49.5703 15.9075 49.2638 15.66 48.8813 15.66H48.825C48.4735 15.66 48.1641 15.7612 47.8435 16.1578C47.4916 16.5047 47.2299 16.9325 47.0813 17.4038C46.877 17.8763 46.7625 18.3827 46.7438 18.8972V18.9731C46.7438 19.3078 46.7747 19.6453 46.8141 19.9828C46.0828 19.7353 45.1744 19.4681 44.5303 19.2206C44.4953 18.9736 44.4756 18.7247 44.4713 18.4753V18.3994C44.4428 17.4089 44.6339 16.4244 45.031 15.5166C45.3375 14.6953 45.8944 13.9894 46.6425 13.5225C47.2838 13.0416 48.06 12.7772 48.8672 12.7772V12.7716ZM37.7635 12.9937H37.8956C38.4244 12.9937 38.9081 13.1709 39.3919 13.4916C39.946 13.9753 40.3903 14.5744 40.6828 15.2325C41.0203 15.9834 41.2088 16.7428 41.2678 17.7384V17.7525C41.2819 18.2503 41.2819 18.5175 41.2538 18.7509V19.0575L40.9472 19.1447C40.3763 19.35 39.9235 19.6425 39.465 19.8956C39.51 19.5581 39.51 19.2206 39.4791 18.8972V18.8381C39.4369 18.3431 39.3328 18.0928 39.1725 17.5922C39.0525 17.2072 38.8355 16.8595 38.5425 16.5825C38.3583 16.4183 38.1168 16.3334 37.8703 16.3462H37.7803C37.5188 16.3603 37.2966 16.4925 37.0941 16.8441C36.8462 17.1292 36.6886 17.4817 36.6413 17.8566C36.5372 18.2503 36.5063 18.675 36.5513 19.1025V19.1447C36.5963 19.6594 36.6835 19.9097 36.8578 20.4047C36.971 20.7862 37.1836 21.1308 37.4738 21.4031C37.5188 21.4481 37.5497 21.4791 37.606 21.4903C37.3444 21.7125 37.1672 21.7575 36.9506 22.005C36.8016 22.1091 36.6441 22.2413 36.4528 22.2722C36.0628 21.803 35.719 21.2972 35.4263 20.7619C35.0674 19.9735 34.8686 19.1217 34.8413 18.2559C34.7845 17.4098 34.8836 16.5604 35.1338 15.75C35.356 15.0188 35.7075 14.3297 36.2025 13.7447C36.6863 13.2469 37.17 12.9994 37.7691 12.9994L37.7635 12.9937ZM42.9047 19.395C44.1507 19.395 45.6469 19.6284 47.461 20.8884C48.5606 21.6394 49.4269 21.9009 51.4181 22.6322C52.3856 23.1469 52.9397 23.6447 53.2182 24.1425V23.6447C53.3517 23.9164 53.426 24.2133 53.4362 24.5158C53.4464 24.8184 53.3922 25.1197 53.2772 25.3997C52.8075 26.5725 51.3422 27.8184 49.2806 28.5638V28.5778C48.2822 29.0756 47.4047 29.8237 46.3781 30.3216C45.3403 30.8194 44.1647 31.4212 42.5841 31.32C42.0117 31.3451 41.4398 31.2601 40.8994 31.0697C40.4828 30.8485 40.0816 30.5995 39.6985 30.3244C38.9672 29.8266 38.3372 29.0784 37.4007 28.5806V28.5666H37.3866C35.8763 27.6441 35.0719 26.6456 34.8075 25.9003C34.56 24.8906 34.7935 24.1453 35.5416 23.6475C36.3741 23.1497 36.9591 22.635 37.3416 22.3875C37.7353 22.1091 37.8844 22.005 38.0025 21.9037H38.0166V21.8897C38.6466 21.1275 39.6394 20.1319 41.1666 19.6313C41.6757 19.4991 42.2663 19.3978 42.9075 19.3978L42.9047 19.395ZM53.3925 27.4191C54.7425 32.7375 57.8925 40.4578 59.9147 44.1928C60.9835 46.1981 63.121 50.4169 64.0435 55.5328C64.6285 55.5188 65.2725 55.6031 65.9644 55.7803C68.3944 49.5112 63.9282 42.7725 61.8919 40.8966C61.0566 40.1513 61.0144 39.6506 61.4222 39.6506C63.6357 41.6419 66.5325 45.5428 67.5872 49.9781C68.071 51.9834 68.1919 54.1266 67.6772 56.2472C67.9247 56.3484 68.175 56.4806 68.4394 56.4947C72.3066 58.5056 73.741 60.0131 73.0519 62.2659V62.1056C72.8353 62.0944 72.5991 62.1056 72.3797 62.1056H72.3206C72.8944 60.3506 71.6344 59.0006 68.3241 57.5072C64.8956 56.0138 62.1563 56.2472 61.6866 59.2509C61.6534 59.4206 61.6346 59.5928 61.6303 59.7656C61.3631 59.8528 61.1016 59.9541 60.84 59.9991C59.2285 61.0116 58.3622 62.5191 57.8672 64.4541C57.3835 66.4594 57.2372 68.7881 57.105 71.4713C57.015 72.7313 56.461 74.6184 55.9013 76.5366C50.2763 80.5641 42.4688 82.3078 35.851 77.7966C35.4235 77.0653 34.9256 76.3903 34.3407 75.7913C34.0598 75.3258 33.7099 74.9057 33.3028 74.5453C33.9891 74.5453 34.5769 74.43 35.0466 74.295C35.583 74.0366 36.0048 73.5887 36.2306 73.0378C36.6272 72.0394 36.2306 70.4278 34.9257 68.67C33.6403 66.9291 31.441 64.9491 28.2319 62.9747C25.861 61.4813 24.5278 59.7094 23.9119 57.7434C23.296 55.7381 23.3832 53.6709 23.8528 51.5784C24.7753 47.565 27.135 43.6556 28.6453 41.2059C29.0391 40.9725 28.7775 41.7206 27.1069 44.8706C25.6247 47.6831 22.8291 54.2306 26.6485 59.3128C26.7953 55.6011 27.6198 51.9475 29.0813 48.5325C31.1878 43.7428 35.6147 35.3953 35.9663 28.7747C36.1435 28.9209 36.7735 29.2894 37.0491 29.5369C37.8563 30.0347 38.4694 30.7828 39.2625 31.2806C40.0528 32.0259 41.0485 32.5406 42.5447 32.5406C42.691 32.5547 42.8232 32.5547 42.9525 32.5547C44.491 32.5547 45.6947 32.0569 46.6875 31.5563C47.7703 31.0416 48.6535 30.2962 49.4691 30.0487H49.4831C51.2269 29.5509 52.6191 28.5384 53.3953 27.4247L53.3925 27.4191ZM61.5966 61.0116C61.7428 63.2644 62.8875 65.6831 64.9069 66.1781C67.1035 66.6759 70.2816 64.9322 71.6147 63.3094L72.405 63.2784C73.5891 63.2475 74.5735 63.3094 75.5803 64.2769L75.5944 64.2909C76.3706 65.0362 76.7391 66.2822 77.0597 67.5731C77.3831 69.0806 77.6306 70.5009 78.5981 71.5697C80.4122 73.5469 81.0141 74.9672 80.986 75.8475C80.9269 76.8262 80.28 77.3241 79.11 78.0722C76.7503 79.5825 72.5625 80.7384 69.8963 83.9644C67.5788 86.7319 64.755 88.2394 62.2603 88.4306C59.7713 88.6359 57.6169 87.6853 56.3569 85.0641L56.3428 85.05C55.5525 83.5537 55.89 81.2109 56.5481 78.7191C57.2091 76.2131 58.1597 73.6678 58.2919 71.6006C58.4241 68.9203 58.5703 66.5916 59.0091 64.7859C59.4619 63.0422 60.1678 61.7963 61.4278 61.11L61.5882 61.02L61.5966 61.0116ZM21.0347 61.2H21.0797C21.285 61.2 21.4763 61.2141 21.6647 61.2591C23.071 61.4644 24.3169 62.505 25.5038 64.0716L28.9153 70.3125L28.9294 70.3266C29.8378 72.3178 31.756 74.3091 33.3816 76.4662C35.01 78.705 36.27 80.7103 36.1238 82.3528V82.3838C35.9016 85.1653 34.321 86.6728 31.905 87.2325C29.4863 87.7303 26.2041 87.2325 22.9247 85.4887C19.2938 83.4834 14.971 83.7309 12.2035 83.2303C10.8282 82.9828 9.91972 82.4681 9.49222 81.7228C9.0844 80.9775 9.06753 79.4644 9.9619 77.1075V77.0963C10.4007 75.8363 10.0828 74.2697 9.86065 72.8916C9.65534 71.3953 9.55409 70.2366 10.021 69.3731C10.62 68.1131 11.5144 67.8797 12.6113 67.3678C13.711 66.87 15.016 66.6225 16.0397 65.61H16.0538V65.5959C17.0072 64.6031 17.7272 63.3572 18.5597 62.46C19.2657 61.6978 19.98 61.2 21.0347 61.2ZM47.8885 27.1716C46.26 27.9169 44.3419 29.1769 42.3056 29.1769C40.2694 29.1769 38.6719 28.1841 37.516 27.4331C36.931 26.9241 36.4613 26.4234 36.1097 26.1731C35.4938 25.6781 35.5669 24.9159 35.8313 24.9159C36.2391 24.9722 36.315 25.425 36.5766 25.6781C36.945 25.9256 37.3838 26.4234 37.9238 26.9241C39.0235 27.6694 40.4888 28.6791 42.3028 28.6791C44.1225 28.6791 46.26 27.6694 47.5481 26.9241C48.2794 26.4263 49.216 25.6781 49.9781 25.1803C50.5631 24.6656 50.5378 24.1678 51.016 24.1678C51.4997 24.2269 51.151 24.6656 50.476 25.4138C49.7869 25.9284 48.7322 26.6737 47.8856 27.1716H47.8885ZM43.83 21.2259V21.1556C43.816 21.0797 43.8722 20.9953 43.9453 20.9644C44.2069 20.8041 44.6175 20.8603 44.9128 20.9784C45.1463 20.9784 45.5119 21.2259 45.4838 21.4875C45.4528 21.6647 45.1603 21.7378 44.9691 21.7378C44.7666 21.7378 44.6175 21.5775 44.4431 21.4762C44.2519 21.4172 43.8835 21.4453 43.8272 21.2259H43.83ZM41.7628 21.2259C41.6869 21.4481 41.3353 21.4172 41.1469 21.4762C40.9697 21.5775 40.8235 21.7378 40.6181 21.7378C40.4269 21.7378 40.1203 21.6619 40.1035 21.4762C40.0781 21.2259 40.4269 20.9784 40.6632 20.9784C40.9697 20.8575 41.3494 20.8013 41.6419 20.9644C41.701 20.9953 41.7769 21.0797 41.746 21.1556V21.2259H41.7628Z"
                            fill="white"/>
                    </g>
                    <defs>
                        <clipPath id="clip0_228_277">
                            <rect width="90" height="90" fill="white"/>
                        </clipPath>
                    </defs>
                </svg>
            )
    }
}